# Maillionaire 测试指南

## 测试概述

本文档提供 Maillionaire 邮件客户端的完整测试指南，包括功能测试、集成测试和用户验收测试。

---

## 测试环境准备

### 1. 开发环境要求

- Node.js >= 16.x
- npm >= 8.x 或 yarn >= 1.22.x
- 支持的操作系统：Windows 10+, macOS 10.15+, Linux

### 2. 测试邮箱账户

准备以下类型的测试邮箱：

| 邮箱类型 | 用途 | 数量 |
|---------|------|------|
| Gmail | OAuth2 认证测试 | 1 |
| QQ 邮箱 | IMAP/SMTP 测试 | 1 |
| 163 邮箱 | IMAP/SMTP 测试 | 1 |
| Outlook | OAuth2 认证测试 | 1 |

### 3. 安装依赖

```bash
npm install
```

---

## 功能测试清单

### 1. 账户管理 ✅

#### 测试用例 1.1: 添加邮箱账户

**前置条件**：无
**测试步骤**：
1. 启动应用
2. 点击"添加邮箱账户"
3. 选择邮箱类型（Gmail/QQ/163/Outlook）
4. 输入邮箱地址和密码/授权码
5. 点击"连接"

**预期结果**：
- ✅ 成功连接并保存账户
- ✅ 显示在账户列表中
- ✅ 账户信息加密存储

#### 测试用例 1.2: 切换账户

**前置条件**：已添加2个以上账户
**测试步骤**：
1. 点击账户选择下拉框
2. 选择另一个账户

**预期结果**：
- ✅ 账户切换成功
- ✅ 加载该账户的邮件列表
- ✅ 显示该账户的文件夹

#### 测试用例 1.3: 删除账户

**前置条件**：已添加账户
**测试步骤**：
1. 进入设置 → 账户管理
2. 选择要删除的账户
3. 点击"删除"按钮
4. 确认删除

**预期结果**：
- ✅ 账户从列表中移除
- ✅ 本地数据清理
- ✅ 如果是当前账户，自动切换到其他账户

---

### 2. 邮件收发 ✅

#### 测试用例 2.1: 接收邮件

**前置条件**：账户已连接
**测试步骤**：
1. 点击"同步"按钮
2. 等待同步完成

**预期结果**：
- ✅ 显示收件箱邮件列表
- ✅ 显示发件人、主题、时间
- ✅ 未读邮件高亮显示
- ✅ 显示未读数量

#### 测试用例 2.2: 发送邮件

**前置条件**：账户已连接
**测试步骤**：
1. 点击"写邮件"
2. 填写收件人、主题、正文
3. 点击"发送"

**预期结果**：
- ✅ 邮件发送成功
- ✅ 显示在已发送文件夹
- ✅ 收件人收到邮件

#### 测试用例 2.3: 发送带附件邮件

**前置条件**：账户已连接
**测试步骤**：
1. 点击"写邮件"
2. 填写收件人、主题、正文
3. 点击"添加附件"，选择文件
4. 点击"发送"

**预期结果**：
- ✅ 附件上传成功
- ✅ 邮件发送成功
- ✅ 收件人收到带附件的邮件

#### 测试用例 2.4: 回复邮件

**前置条件**：收件箱有邮件
**测试步骤**：
1. 打开邮件详情
2. 点击"回复"
3. 编辑回复内容
4. 点击"发送"

**预期结果**：
- ✅ 自动填充收件人
- ✅ 主题自动添加 "Re:"
- ✅ 引用原邮件内容
- ✅ 发送成功

---

### 3. 文件夹管理 ✅

#### 测试用例 3.1: 同步服务器文件夹

**前置条件**：账户已连接
**测试步骤**：
1. 点击左侧边栏"同步"按钮
2. 等待同步完成

**预期结果**：
- ✅ 获取服务器文件夹列表
- ✅ 显示在本地文件夹列表
- ✅ 更新最后同步时间

#### 测试用例 3.2: 创建自定义文件夹

**前置条件**：账户已连接
**测试步骤**：
1. 点击"新建文件夹"
2. 输入文件夹名称
3. 点击"确定"

**预期结果**：
- ✅ 文件夹创建成功
- ✅ 显示在文件夹列表
- ✅ 同步到服务器（如果支持）

#### 测试用例 3.3: 移动邮件到文件夹

**前置条件**：已有自定义文件夹
**测试步骤**：
1. 选中一封邮件
2. 右键选择"移动到"
3. 选择目标文件夹

**预期结果**：
- ✅ 邮件从原文件夹移除
- ✅ 邮件出现在目标文件夹
- ✅ 同步到服务器

---

### 4. 邮件模板和签名 ✅

#### 测试用例 4.1: 创建邮件模板

**前置条件**：无
**测试步骤**：
1. 进入设置 → 邮件模板
2. 点击"新建模板"
3. 填写模板名称、主题、正文
4. 点击"保存"

**预期结果**：
- ✅ 模板保存成功
- ✅ 显示在模板列表
- ✅ 支持富文本格式

#### 测试用例 4.2: 使用邮件模板

**前置条件**：已创建模板
**测试步骤**：
1. 点击"写邮件"
2. 点击"使用模板"
3. 选择一个模板

**预期结果**：
- ✅ 模板内容自动填充到邮件
- ✅ 主题和正文都正确填充
- ✅ 可以继续编辑

#### 测试用例 4.3: 创建邮件签名

**前置条件**：无
**测试步骤**：
1. 进入设置 → 签名管理
2. 点击"新建签名"
3. 填写签名名称和内容
4. 点击"保存"

**预期结果**：
- ✅ 签名保存成功
- ✅ 显示在签名列表
- ✅ 支持富文本格式

#### 测试用例 4.4: 插入签名

**前置条件**：已创建签名
**测试步骤**：
1. 点击"写邮件"
2. 点击"插入签名"
3. 选择一个签名

**预期结果**：
- ✅ 签名插入到邮件末尾
- ✅ 格式正确
- ✅ 可以继续编辑

---

### 5. 通讯录管理 ✅

#### 测试用例 5.1: 添加联系人

**前置条件**：无
**测试步骤**：
1. 进入通讯录页面
2. 点击"新建联系人"
3. 填写姓名、邮箱等信息
4. 点击"保存"

**预期结果**：
- ✅ 联系人保存成功
- ✅ 显示在联系人列表
- ✅ 信息完整

#### 测试用例 5.2: 搜索联系人

**前置条件**：已有联系人
**测试步骤**：
1. 在搜索框输入关键词
2. 查看搜索结果

**预期结果**：
- ✅ 实时显示搜索结果
- ✅ 支持姓名、邮箱搜索
- ✅ 高亮匹配内容

#### 测试用例 5.3: 从通讯录发邮件

**前置条件**：已有联系人
**测试步骤**：
1. 在通讯录选择一个联系人
2. 点击邮件图标

**预期结果**：
- ✅ 打开撰写邮件窗口
- ✅ 自动填充收件人
- ✅ 可以正常发送

---

### 6. 本地存储 ✅

#### 测试用例 6.1: 数据持久化

**前置条件**：已有邮件和联系人
**测试步骤**：
1. 关闭应用
2. 重新打开应用

**预期结果**：
- ✅ 所有数据正常加载
- ✅ 账户状态保持
- ✅ 未读数量正确

#### 测试用例 6.2: 离线访问

**前置条件**：已同步邮件
**测试步骤**：
1. 断开网络连接
2. 浏览邮件列表
3. 查看邮件详情

**预期结果**：
- ✅ 可以查看已缓存的邮件
- ✅ 显示离线状态
- ✅ 发送功能禁用

---

## 集成测试

### 场景测试 1: 完整邮件工作流

**步骤**：
1. 添加Gmail账户
2. 同步收件箱
3. 阅读一封邮件
4. 回复该邮件（使用签名）
5. 将邮件标记为星标
6. 移动到自定义文件夹

**预期结果**：所有操作成功，数据正确

### 场景测试 2: 多账户切换

**步骤**：
1. 添加2个不同的邮箱账户
2. 在账户1发送邮件
3. 切换到账户2
4. 同步并查看邮件
5. 切换回账户1

**预期结果**：账户数据独立，切换正常

### 场景测试 3: 模板和签名组合使用

**步骤**：
1. 创建工作邮件模板
2. 创建正式签名
3. 新建邮件，应用模板
4. 插入签名
5. 发送邮件

**预期结果**：模板和签名正确组合

---

## 性能测试

### 测试指标

| 测试项 | 目标性能 | 测试方法 |
|-------|---------|---------|
| 应用启动时间 | < 3秒 | 计时从点击到界面显示 |
| 邮件列表加载 | < 2秒 (100封) | 计时加载100封邮件 |
| 搜索响应时间 | < 500ms | 输入关键词到显示结果 |
| 内存占用 | < 200MB (空闲) | 任务管理器查看 |
| 发送邮件 | < 5秒 | 计时从点击到成功提示 |

### 大数据量测试

- 邮件数量：1000+
- 联系人数量：500+
- 文件夹数量：20+
- 模板数量：50+

---

## 兼容性测试

### 平台测试

| 平台 | 版本 | 状态 |
|------|------|------|
| Windows | 10/11 | ✅ 测试通过 |
| macOS | 10.15+ | ⏳ 待测试 |
| Linux | Ubuntu 20.04+ | ⏳ 待测试 |

### 邮箱服务商测试

| 服务商 | 协议 | 状态 |
|-------|------|------|
| Gmail | OAuth2 | ⏳ 待测试 |
| QQ邮箱 | IMAP/SMTP | ⏳ 待测试 |
| 163邮箱 | IMAP/SMTP | ⏳ 待测试 |
| Outlook | OAuth2 | ⏳ 待测试 |

---

## 已知问题

### 功能问题

1. **OAuth2认证**
   - 状态：框架已实现，待实际测试
   - 影响：Gmail/Outlook认证
   - 计划修复：v1.1.0

2. **邮件搜索**
   - 状态：UI已实现，功能待完善
   - 影响：无法搜索邮件
   - 计划修复：v1.1.0

3. **附件下载**
   - 状态：显示功能已实现，下载待完善
   - 影响：无法下载大附件
   - 计划修复：v1.0.1

### UI问题

1. **暗黑模式**
   - 状态：未实现
   - 计划：v1.2.0

2. **移动端适配**
   - 状态：未实现
   - 计划：v2.0.0

---

## 测试报告模板

### 测试执行报告

**项目名称**：Maillionaire  
**测试版本**：v1.0.0  
**测试日期**：YYYY-MM-DD  
**测试人员**：[姓名]

#### 测试概况

- 测试用例总数：XX
- 通过数量：XX
- 失败数量：XX
- 阻塞数量：XX
- 通过率：XX%

#### 问题列表

| 编号 | 模块 | 严重程度 | 问题描述 | 状态 |
|------|------|---------|---------|------|
| 001 | 邮件发送 | 高 | ... | 待修复 |
| 002 | 通讯录 | 中 | ... | 已修复 |

#### 测试结论

[测试结论内容]

---

## 自动化测试（计划中）

### 单元测试

```bash
# 运行单元测试
npm run test:unit

# 运行覆盖率测试
npm run test:coverage
```

### E2E测试

```bash
# 运行端到端测试
npm run test:e2e
```

---

## 用户验收测试

### UAT检查清单

- [ ] 所有核心功能正常工作
- [ ] UI/UX符合设计规范
- [ ] 性能满足要求
- [ ] 无严重Bug
- [ ] 文档完整

### 反馈收集

请在使用过程中记录：
- 功能问题
- 性能问题  
- UI/UX改进建议
- 新功能需求

---

## 回归测试

### 何时进行回归测试

- 修复重要Bug后
- 添加新功能后
- 发布新版本前

### 回归测试范围

- 核心功能模块
- 之前发现的Bug区域
- 受影响的关联功能

---

## 测试工具

### 推荐工具

- **开发者工具**：Chrome DevTools
- **网络监控**：Wireshark
- **性能分析**：Lighthouse
- **截图工具**：Snipaste
- **Bug追踪**：GitHub Issues

---

## 联系方式

**测试问题反馈**：
- GitHub Issues: https://github.com/maillionaire/maillionaire/issues
- Email: test@maillionaire.com

---

**文档版本**：v1.0.0  
**更新日期**：2025-10-19
