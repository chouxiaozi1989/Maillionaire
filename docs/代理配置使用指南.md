# 代理配置使用指南

> 版本：v1.1.0  
> 更新日期：2025-10-19

---

## 📖 快速开始

Maillionaire 支持通过代理服务器进行网络连接，适用于需要通过代理访问互联网的环境。

---

## 🔧 配置步骤

### 1. 打开设置

1. 启动 Maillionaire
2. 点击右下角的"设置"图标
3. 选择"代理设置"

### 2. 启用代理

![代理设置界面](代理设置截图.png)

1. 打开"启用代理"开关
2. 选择代理协议（推荐 SOCKS5）
3. 输入代理服务器地址（如：127.0.0.1）
4. 输入端口号（如：7890）

### 3. 配置认证（可选）

如果您的代理服务器需要认证：

1. 打开"认证"开关
2. 输入用户名
3. 输入密码

### 4. 保存并测试

1. 点击"保存设置"
2. 点击"测试连接"验证代理是否可用
3. **重启应用**使代理全面生效

---

## 🌐 常见代理软件配置

### Clash

```
协议：SOCKS5
地址：127.0.0.1
端口：7890
认证：关闭
```

### V2Ray

```
协议：SOCKS5
地址：127.0.0.1
端口：1080
认证：关闭
```

### Shadowsocks

```
协议：SOCKS5
地址：127.0.0.1
端口：1080
认证：关闭
```

### 公司 HTTP 代理

```
协议：HTTP
地址：proxy.company.com
端口：8080
认证：启用（输入公司提供的用户名密码）
```

---

## 🎯 默认配置

Maillionaire 的默认代理配置如下：

| 配置项 | 默认值 | 说明 |
|--------|--------|------|
| 启用代理 | 关闭 | 默认不使用代理 |
| 代理协议 | SOCKS5 | 推荐协议 |
| 服务器地址 | 127.0.0.1 | 本地地址 |
| 端口 | 7890 | Clash 默认端口 |
| 认证 | 关闭 | 默认不需要认证 |

---

## ⚠️ 注意事项

### 1. 重启应用

修改代理设置后，**必须重启应用**才能使所有网络连接使用新的代理配置。

### 2. 代理软件运行

确保代理软件（如 Clash、V2Ray）正在运行，并且端口配置正确。

### 3. 测试连接

保存配置后，强烈建议点击"测试连接"按钮，确保代理可用。

### 4. 安全性

- 代理密码会保存在本地，请确保计算机安全
- 不建议在公共电脑上保存代理密码

---

## 🔍 故障排查

### 问题 1：无法连接网络

**可能原因：**
- 代理软件未运行
- 端口配置错误
- 代理服务器不可用

**解决方法：**
1. 检查代理软件是否运行
2. 验证端口号是否正确
3. 尝试"测试连接"
4. 临时关闭代理，验证网络是否正常

### 问题 2：测试连接失败

**可能原因：**
- 代理配置错误
- 防火墙阻止连接
- 代理服务器需要认证但未配置

**解决方法：**
1. 检查所有配置项是否正确
2. 如果代理需要认证，启用认证并输入凭据
3. 检查防火墙设置
4. 尝试使用其他应用测试代理

### 问题 3：部分功能无法使用

**说明：**
当前版本的代理配置主要影响 HTTP/HTTPS 请求。某些功能（如 IMAP/SMTP）需要在 Electron 主进程中实现代理支持。

**解决方法：**
等待后续版本更新，或联系技术支持。

---

## 📋 支持的协议

### SOCKS5（推荐）

- ✅ 支持 TCP 和 UDP
- ✅ 支持认证
- ✅ 速度快，兼容性好
- ✅ 适用于大多数场景

### SOCKS4

- ✅ 仅支持 TCP
- ❌ 不支持认证
- ⚠️ 较旧的协议，不推荐

### HTTP

- ✅ 标准 HTTP 代理
- ✅ 支持认证
- ⚠️ 不支持 UDP

### HTTPS

- ✅ 加密的 HTTP 代理
- ✅ 支持认证
- ✅ 安全性更好

---

## 🛠️ 高级配置

### 重置为默认

如果代理配置出现问题，可以点击"重置为默认"按钮恢复默认配置：

```
enabled: false
protocol: socks5
host: 127.0.0.1
port: 7890
auth.enabled: false
```

### 查看当前配置

启用代理后，设置界面会显示当前代理信息：

```
当前代理：socks5://127.0.0.1:7890
```

如果启用了认证，密码会显示为 `***`：

```
当前代理：socks5://username:***@127.0.0.1:7890
```

---

## 💡 最佳实践

### 1. 使用本地代理

推荐使用本地代理软件（如 Clash），配置为：
```
地址：127.0.0.1
端口：7890（Clash 默认）
```

### 2. 选择合适的协议

- **一般情况**：使用 SOCKS5
- **公司环境**：可能需要 HTTP/HTTPS
- **兼容性优先**：使用 SOCKS4

### 3. 定期测试

定期点击"测试连接"确保代理正常工作。

### 4. 备份配置

记录代理配置信息，以便在需要时快速恢复。

---

## 📞 技术支持

如果遇到代理配置问题，请：

1. 查看本指南的"故障排查"部分
2. 检查代理软件的日志
3. 访问项目文档：`docs/03-功能实现/代理配置功能实现.md`
4. 提交 Issue：描述问题和配置信息

---

## 🔄 版本更新

### v1.1.0（当前版本）

**新增功能：**
- ✅ 基础代理配置
- ✅ SOCKS5/SOCKS4/HTTP/HTTPS 协议支持
- ✅ 用户名密码认证
- ✅ 配置测试功能
- ✅ 重置为默认

**已知限制：**
- ⚠️ IMAP/SMTP 代理支持需要在 Electron 主进程实现
- ⚠️ 密码明文存储（后续版本将加密）

### 未来计划

- [ ] Electron 主进程代理支持
- [ ] 密码加密存储
- [ ] PAC 自动代理配置
- [ ] 代理规则配置
- [ ] 多代理配置切换

---

**开始使用代理，享受更好的网络连接！** 🚀

