# Maillionaire - 邮件客户端产品需求文档（PRD）

## 1. 项目概述

### 1.1 项目名称
Maillionaire - 专业的跨平台邮件收发客户端

### 1.2 项目目标
开发一款基于 Electron + Vue3 + Ant Design Vue 的桌面邮件客户端，支持多邮箱账户管理、邮件收发、模板管理、通讯录等核心功能，提供简洁高效的邮件处理体验。

### 1.3 技术栈
- **前端框架**: Vue 3 (Composition API)
- **UI组件库**: Ant Design Vue 4.x
- **桌面框架**: Electron
- **富文本编辑器**: Quill / TinyMCE
- **邮件协议**: IMAP, SMTP, OAuth2
- **本地存储**: 文件系统（JSON）
- **构建工具**: Vite
- **状态管理**: Pinia

---

## 2. 功能需求

### 2.1 邮箱账户管理

#### 2.1.1 支持的邮箱服务商
| 邮箱服务商 | 认证方式 | 协议 |
|-----------|---------|------|
| Gmail | OAuth2 | IMAP/SMTP |
| QQ邮箱 | 授权码 | IMAP/SMTP |
| 163邮箱 | 授权码 | IMAP/SMTP |
| 126邮箱 | 授权码 | IMAP/SMTP |
| Hotmail/Outlook | OAuth2 | IMAP/SMTP |

#### 2.1.2 账户配置
- 添加邮箱账户（自动识别服务商配置）
- 编辑账户信息
- 删除账户
- 多账户切换
- 账户状态显示（已连接/未连接）

### 2.2 邮件收取功能

#### 2.2.1 收取方式
- **按日期筛选**: 
  - 今天
  - 最近7天
  - 最近30天
  - 自定义日期范围
  
- **按数量获取**:
  - 最新10封
  - 最新50封
  - 最新100封
  - 自定义数量

#### 2.2.2 邮件列表显示
- 发件人
- 主题
- 时间
- 是否已读
- 是否有附件
- 邮件大小
- 星标标记

#### 2.2.3 邮件过滤
- 未读邮件
- 已读邮件
- 有附件
- 带星标

### 2.3 邮件发送功能

#### 2.3.1 撰写邮件
- 收件人（支持多个，自动完成）
- 抄送（CC）
- 密送（BCC）
- 主题
- 富文本正文
- 附件（支持多文件）

#### 2.3.2 富文本编辑器功能
- 字体样式（加粗、斜体、下划线、删除线）
- 字体大小和颜色
- 段落格式（标题、引用、列表）
- 插入链接
- 插入图片
- 插入表格
- 代码块
- 撤销/重做

#### 2.3.3 发送选项
- 立即发送
- 保存草稿
- 发送并保存
- 应用模板
- 应用签名

### 2.4 邮件删除与同步

#### 2.4.1 删除操作
- 单封删除
- 批量删除
- 移至回收站
- 永久删除

#### 2.4.2 服务器同步
- 实时同步删除状态
- 同步读/未读状态
- 同步星标状态
- 同步文件夹移动

### 2.5 文件夹管理

#### 2.5.1 系统文件夹
- 收件箱
- 已发送
- 草稿箱
- 回收站
- 垃圾邮件
- 星标邮件

#### 2.5.2 自定义文件夹
- 创建文件夹
- 重命名文件夹
- 删除文件夹
- 移动邮件到文件夹

#### 2.5.3 文件夹同步
- 同步服务器文件夹结构
- 双向同步邮件
- 增量同步

### 2.6 邮件详情弹窗

#### 2.6.1 显示内容
- 发件人信息
- 收件人信息
- 邮件主题
- 发送时间
- 富文本正文（支持HTML渲染）
- 附件列表及下载

#### 2.6.2 操作功能
- 回复
- 全部回复
- 转发
- 删除
- 星标/取消星标
- 标记为已读/未读
- 打印
- 下载附件

### 2.7 邮件模板与签名

#### 2.7.1 邮件模板
- 创建模板（名称、内容、分类）
- 编辑模板
- 删除模板
- 应用模板到新邮件
- 模板分类管理

#### 2.7.2 个性化签名
- 创建多个签名
- 富文本签名编辑
- 设置默认签名
- 根据账户设置不同签名
- 自动插入签名

### 2.8 通讯录管理

#### 2.8.1 联系人信息
- 姓名
- 邮箱地址
- 电话
- 公司
- 职位
- 备注
- 头像

#### 2.8.2 通讯录功能
- 添加联系人
- 编辑联系人
- 删除联系人
- 搜索联系人
- 分组管理
- 导入/导出（CSV）

#### 2.8.3 快速使用
- 撰写邮件时自动完成
- 点击联系人快速发送邮件

### 2.9 本地数据存储

#### 2.9.1 存储结构
```
AppData/
├── accounts/          # 账户配置
│   └── {accountId}.json
├── emails/            # 邮件数据
│   └── {accountId}/
│       ├── inbox/
│       ├── sent/
│       └── drafts/
├── contacts/          # 通讯录
│   └── contacts.json
├── templates/         # 邮件模板
│   └── templates.json
├── signatures/        # 签名
│   └── signatures.json
└── settings/          # 应用设置
    └── config.json
```

#### 2.9.2 数据管理
- 自动保存
- 定期清理
- 数据导出
- 数据备份

---

## 3. 非功能性需求

### 3.1 性能要求
- 邮件列表加载时间 < 2秒
- 邮件详情打开时间 < 1秒
- 支持10000+邮件本地缓存
- 内存占用 < 500MB

### 3.2 安全要求
- OAuth2 安全认证
- 密码本地加密存储
- HTTPS/TLS 加密传输
- 敏感数据不记录日志

### 3.3 兼容性要求
- Windows 10/11
- macOS 10.15+
- Linux (Ubuntu 18.04+)

### 3.4 用户体验
- 界面简洁美观
- 操作响应及时
- 错误提示友好
- 支持快捷键操作

---

## 4. 界面设计要求

### 4.1 整体风格
- 采用现代化扁平设计
- 主色调：蓝色系（专业、科技感）
- 辅助色：灰色系
- 强调色：橙色（重要操作）

### 4.2 主要页面
1. **登录页面**: 账户选择/添加
2. **主界面**: 
   - 左侧：账户切换 + 文件夹列表
   - 中间：邮件列表
   - 右侧：邮件预览（可选）
3. **撰写邮件页面**: 独立窗口或抽屉
4. **邮件详情弹窗**: 模态框
5. **设置页面**: 多Tab配置
6. **通讯录页面**: 列表+详情

### 4.3 响应式设计
- 支持窗口大小调整
- 最小窗口尺寸：1024x768

---

## 5. 开发里程碑

### Phase 1: 基础框架（Week 1-2）
- 项目初始化
- 基础UI框架搭建
- 本地存储系统

### Phase 2: 邮件收发（Week 3-4）
- 账户管理
- IMAP邮件收取
- SMTP邮件发送
- OAuth2认证

### Phase 3: 高级功能（Week 5-6）
- 文件夹同步
- 邮件详情弹窗
- 富文本编辑器
- 附件处理

### Phase 4: 扩展功能（Week 7-8）
- 模板管理
- 签名管理
- 通讯录

### Phase 5: 优化与测试（Week 9-10）
- 性能优化
- Bug修复
- 文档完善

---

## 6. 风险与挑战

### 6.1 技术风险
- OAuth2认证流程复杂
- 不同邮箱服务商协议差异
- 大量邮件性能优化

### 6.2 解决方案
- 使用成熟的OAuth2库
- 封装统一的邮件服务接口
- 虚拟滚动、懒加载优化

---

## 7. 附录

### 7.1 参考资源
- [IMAP RFC 3501](https://tools.ietf.org/html/rfc3501)
- [SMTP RFC 5321](https://tools.ietf.org/html/rfc5321)
- [Google OAuth2 文档](https://developers.google.com/identity/protocols/oauth2)
- [Microsoft Graph API](https://docs.microsoft.com/en-us/graph/auth-v2-user)

### 7.2 第三方库
- `nodemailer`: SMTP发送
- `imap`: IMAP协议
- `@vueup/vue-quill`: 富文本编辑器
- `pinia`: 状态管理
- `dayjs`: 日期处理
- `crypto-js`: 加密

---

**文档版本**: v1.0  
**创建日期**: 2025-10-19  
**最后更新**: 2025-10-19
