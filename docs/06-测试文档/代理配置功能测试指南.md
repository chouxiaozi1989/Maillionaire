# ä»£ç†é…ç½®åŠŸèƒ½ - å¿«é€Ÿæµ‹è¯•æŒ‡å—

> ç‰ˆæœ¬ï¼šv1.1.0  
> æµ‹è¯•æ—¥æœŸï¼š2025-10-19

---

## ğŸ¯ æµ‹è¯•ç›®æ ‡

éªŒè¯ä»£ç†é…ç½®åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œï¼ŒåŒ…æ‹¬ï¼š
1. âœ… é…ç½®ç•Œé¢å¯ä»¥æ­£å¸¸æ˜¾ç¤º
2. âœ… é…ç½®å¯ä»¥æ­£å¸¸ä¿å­˜å’Œè¯»å–
3. âœ… ä»£ç†è¿æ¥æµ‹è¯•åŠŸèƒ½æ­£å¸¸
4. âœ… IMAP/SMTP å¯ä»¥ä½¿ç”¨ä»£ç†è¿æ¥

---

## ğŸ”§ å‡†å¤‡å·¥ä½œ

### 1. å¯åŠ¨ä»£ç†è½¯ä»¶

**ä½¿ç”¨ Clashï¼š**
1. å¯åŠ¨ Clash
2. ç¡®ä¿ç«¯å£ä¸º 7890ï¼ˆé»˜è®¤ï¼‰
3. å¼€å¯ç³»ç»Ÿä»£ç†æˆ–å…è®¸æ¥è‡ªå±€åŸŸç½‘çš„è¿æ¥

**ä½¿ç”¨ V2Rayï¼š**
1. å¯åŠ¨ V2Ray
2. ç¡®ä¿ SOCKS ç«¯å£ä¸º 1080
3. è®°å½•ç«¯å£å·

### 2. å¯åŠ¨ Maillionaire

```bash
cd "c:\Users\Administrator\Documents\Maillionaire"
npm run dev
```

åœ¨å¦ä¸€ä¸ªç»ˆç«¯å¯åŠ¨ Electronï¼š

```bash
npm run electron:dev
```

---

## ğŸ“‹ æµ‹è¯•æ­¥éª¤

### æµ‹è¯• 1ï¼šé…ç½®ç•Œé¢æ˜¾ç¤º

**æ­¥éª¤ï¼š**
1. å¯åŠ¨åº”ç”¨
2. è¿›å…¥"è®¾ç½®"é¡µé¢
3. ç‚¹å‡»å·¦ä¾§èœå•"ä»£ç†è®¾ç½®"

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤ºä»£ç†è®¾ç½®é¢æ¿
- âœ… æ˜¾ç¤ºæ‰€æœ‰é…ç½®é€‰é¡¹ï¼š
  - å¯ç”¨ä»£ç†ï¼ˆå¼€å…³ï¼‰
  - ä»£ç†åè®®ï¼ˆä¸‹æ‹‰æ¡†ï¼‰
  - æœåŠ¡å™¨åœ°å€ï¼ˆè¾“å…¥æ¡†ï¼‰
  - ç«¯å£ï¼ˆæ•°å­—è¾“å…¥æ¡†ï¼‰
  - è®¤è¯ï¼ˆå¼€å…³ï¼‰
  - ç”¨æˆ·å/å¯†ç ï¼ˆè®¤è¯å¯ç”¨æ—¶æ˜¾ç¤ºï¼‰
  - ä¿å­˜ã€æµ‹è¯•ã€é‡ç½®æŒ‰é’®

**æˆªå›¾ä½ç½®ï¼š**
`test-screenshots/proxy-settings-ui.png`

---

### æµ‹è¯• 2ï¼šé»˜è®¤é…ç½®æ£€æŸ¥

**æ­¥éª¤ï¼š**
1. é¦–æ¬¡æ‰“å¼€ä»£ç†è®¾ç½®é¡µé¢
2. æŸ¥çœ‹å„é…ç½®é¡¹çš„é»˜è®¤å€¼

**é¢„æœŸç»“æœï¼š**
- âœ… å¯ç”¨ä»£ç†ï¼š**å…³é—­**
- âœ… ä»£ç†åè®®ï¼š**SOCKS5**
- âœ… æœåŠ¡å™¨åœ°å€ï¼š**127.0.0.1**
- âœ… ç«¯å£ï¼š**7890**
- âœ… è®¤è¯ï¼š**å…³é—­**

---

### æµ‹è¯• 3ï¼šé…ç½®ä¿å­˜å’Œè¯»å–

**æ­¥éª¤ï¼š**
1. ä¿®æ”¹é…ç½®ï¼š
   - å¯ç”¨ä»£ç†ï¼šå¼€å¯
   - åè®®ï¼šSOCKS5
   - åœ°å€ï¼š127.0.0.1
   - ç«¯å£ï¼š7890
2. ç‚¹å‡»"ä¿å­˜è®¾ç½®"
3. åˆ·æ–°é¡µé¢æˆ–é‡å¯åº”ç”¨
4. å†æ¬¡æ‰“å¼€ä»£ç†è®¾ç½®

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯ï¼š"ä»£ç†è®¾ç½®å·²ä¿å­˜"
- âœ… é…ç½®è¢«æ­£ç¡®ä¿å­˜
- âœ… é‡æ–°æ‰“å¼€åé…ç½®ä¿æŒä¸å˜
- âœ… localStorage ä¸­æœ‰ `proxy_config` é”®

**éªŒè¯ localStorageï¼š**
æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼š
```javascript
localStorage.getItem('proxy_config')
// åº”è¯¥è¾“å‡ºï¼š
// {"enabled":true,"protocol":"socks5","host":"127.0.0.1","port":7890,"auth":{"enabled":false,"username":"","password":""}}
```

---

### æµ‹è¯• 4ï¼šä»£ç†è¿æ¥æµ‹è¯•

**æ­¥éª¤ï¼š**
1. ç¡®ä¿ Clash æ­£åœ¨è¿è¡Œï¼ˆç«¯å£ 7890ï¼‰
2. é…ç½®ä»£ç†ä¸º SOCKS5://127.0.0.1:7890
3. å¯ç”¨ä»£ç†
4. ç‚¹å‡»"æµ‹è¯•è¿æ¥"æŒ‰é’®

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤ºåŠ è½½çŠ¶æ€
- âœ… å‡ ç§’åæ˜¾ç¤º"ä»£ç†è¿æ¥æµ‹è¯•æˆåŠŸ"æ¶ˆæ¯
- âœ… æ§åˆ¶å°è¾“å‡ºï¼š`[Proxy] Proxy enabled: socks5://127.0.0.1:7890`

**æµ‹è¯•å¤±è´¥æƒ…å†µï¼š**
1. åœæ­¢ Clash
2. ç‚¹å‡»"æµ‹è¯•è¿æ¥"
3. åº”æ˜¾ç¤ºï¼š"è¿æ¥å¤±è´¥ï¼šXXX"

---

### æµ‹è¯• 5ï¼šè®¤è¯åŠŸèƒ½

**æ­¥éª¤ï¼š**
1. ä½¿ç”¨éœ€è¦è®¤è¯çš„ä»£ç†æœåŠ¡å™¨
2. å¯ç”¨è®¤è¯å¼€å…³
3. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
4. ä¿å­˜é…ç½®
5. æµ‹è¯•è¿æ¥

**é¢„æœŸç»“æœï¼š**
- âœ… è®¤è¯å­—æ®µæ˜¾ç¤º
- âœ… é…ç½®ä¿å­˜æˆåŠŸ
- âœ… ä»£ç† URL åŒ…å«è®¤è¯ä¿¡æ¯ï¼ˆå¯†ç æ˜¾ç¤ºä¸º `***`ï¼‰

---

### æµ‹è¯• 6ï¼šé‡ç½®åŠŸèƒ½

**æ­¥éª¤ï¼š**
1. ä¿®æ”¹æ‰€æœ‰é…ç½®é¡¹
2. ç‚¹å‡»"é‡ç½®ä¸ºé»˜è®¤"æŒ‰é’®
3. æŸ¥çœ‹é…ç½®å€¼

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯ï¼š"å·²é‡ç½®ä¸ºé»˜è®¤è®¾ç½®"
- âœ… æ‰€æœ‰é…ç½®æ¢å¤ä¸ºé»˜è®¤å€¼
- âœ… å¯ç”¨ä»£ç†è¢«å…³é—­

---

### æµ‹è¯• 7ï¼šåè®®åˆ‡æ¢

**æ­¥éª¤ï¼š**
1. ä¾æ¬¡é€‰æ‹©ä¸åŒåè®®ï¼š
   - SOCKS5
   - SOCKS4
   - HTTP
   - HTTPS
2. ä¿å­˜å¹¶æµ‹è¯•æ¯ä¸ªåè®®

**é¢„æœŸç»“æœï¼ˆClash æ”¯æŒçš„æƒ…å†µï¼‰ï¼š**
- âœ… SOCKS5ï¼šæµ‹è¯•æˆåŠŸ
- âœ… HTTPï¼šæµ‹è¯•æˆåŠŸ
- âš ï¸ SOCKS4ï¼šå¯èƒ½æˆåŠŸï¼ˆå–å†³äº Clash é…ç½®ï¼‰
- âš ï¸ HTTPSï¼šå¯èƒ½æˆåŠŸ

---

### æµ‹è¯• 8ï¼šElectron ä¸»è¿›ç¨‹é›†æˆ

**æ­¥éª¤ï¼š**
1. å¯ç”¨ä»£ç†é…ç½®
2. ä¿å­˜è®¾ç½®
3. æŸ¥çœ‹ Electron æ§åˆ¶å°è¾“å‡º

**é¢„æœŸç»“æœï¼š**
- âœ… æ§åˆ¶å°è¾“å‡ºï¼š
  ```
  [Proxy] Proxy config updated: enabled
  [Proxy] Proxy enabled: socks5://127.0.0.1:7890
  [SMTP] Proxy config updated: enabled
  [IMAP] Proxy config updated: enabled
  ```

---

### æµ‹è¯• 9ï¼šIMAP/SMTP ä»£ç†è¿æ¥ï¼ˆå¯é€‰ï¼‰

**æ­¥éª¤ï¼š**
1. å¯ç”¨ä»£ç†
2. æ·»åŠ ä¸€ä¸ªé‚®ç®±è´¦æˆ·ï¼ˆå¦‚ Gmailï¼‰
3. å°è¯•è¿æ¥ IMAP/SMTP

**é¢„æœŸç»“æœï¼š**
- âœ… æ§åˆ¶å°è¾“å‡ºï¼š`[IMAP] Using proxy for connection`
- âœ… æ§åˆ¶å°è¾“å‡ºï¼š`[SMTP] Using proxy for connection`
- âœ… é‚®ç®±è´¦æˆ·è¿æ¥æˆåŠŸ

**æ³¨æ„ï¼š**
- è¿™éœ€è¦ä»£ç†å¯ä»¥è®¿é—® Gmail æœåŠ¡å™¨
- å¦‚æœåœ¨ä¸­å›½å¤§é™†ï¼Œéœ€è¦ç¡®ä¿ä»£ç†å¯ä»¥ç¿»å¢™

---

## ğŸ“Š æµ‹è¯•ç»“æœè®°å½•è¡¨

| æµ‹è¯•é¡¹ | çŠ¶æ€ | å¤‡æ³¨ |
|-------|------|------|
| 1. é…ç½®ç•Œé¢æ˜¾ç¤º | â¬œ | |
| 2. é»˜è®¤é…ç½®æ£€æŸ¥ | â¬œ | |
| 3. é…ç½®ä¿å­˜å’Œè¯»å– | â¬œ | |
| 4. ä»£ç†è¿æ¥æµ‹è¯• | â¬œ | |
| 5. è®¤è¯åŠŸèƒ½ | â¬œ | å¯é€‰ |
| 6. é‡ç½®åŠŸèƒ½ | â¬œ | |
| 7. åè®®åˆ‡æ¢ | â¬œ | |
| 8. Electron é›†æˆ | â¬œ | |
| 9. IMAP/SMTP ä»£ç† | â¬œ | å¯é€‰ |

**çŠ¶æ€è¯´æ˜ï¼š**
- â¬œ æœªæµ‹è¯•
- âœ… é€šè¿‡
- âŒ å¤±è´¥
- âš ï¸ éƒ¨åˆ†é€šè¿‡

---

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜ 1ï¼šæµ‹è¯•è¿æ¥ä¸€ç›´å¤±è´¥

**å¯èƒ½åŸå› ï¼š**
1. Clash æœªè¿è¡Œ
2. ç«¯å£é…ç½®é”™è¯¯
3. é˜²ç«å¢™é˜»æ­¢

**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥ Clash æ˜¯å¦è¿è¡Œ
2. éªŒè¯ç«¯å£å·ï¼ˆé»˜è®¤ 7890ï¼‰
3. ä¸´æ—¶å…³é—­é˜²ç«å¢™æµ‹è¯•

### é—®é¢˜ 2ï¼šé…ç½®ä¿å­˜åä¸¢å¤±

**å¯èƒ½åŸå› ï¼š**
1. localStorage è¢«æ¸…é™¤
2. æµè§ˆå™¨éšç§æ¨¡å¼

**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥æµè§ˆå™¨è®¾ç½®
2. ä½¿ç”¨æ­£å¸¸æ¨¡å¼ï¼ˆééšç§æ¨¡å¼ï¼‰

### é—®é¢˜ 3ï¼šElectron ä¸»è¿›ç¨‹æ²¡æœ‰è¾“å‡º

**å¯èƒ½åŸå› ï¼š**
1. Electron æœªå¯åŠ¨
2. IPC é€šä¿¡å¤±è´¥

**è§£å†³æ–¹æ³•ï¼š**
1. ç¡®ä¿ä½¿ç”¨ `npm run electron:dev`
2. æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

---

## ğŸ“ æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```
## ä»£ç†é…ç½®åŠŸèƒ½æµ‹è¯•æŠ¥å‘Š

**æµ‹è¯•æ—¥æœŸï¼š** 2025-10-19  
**æµ‹è¯•äººå‘˜ï¼š** XXX  
**åº”ç”¨ç‰ˆæœ¬ï¼š** v1.1.0  

### æµ‹è¯•ç¯å¢ƒ
- æ“ä½œç³»ç»Ÿï¼šWindows 11 / macOS / Linux
- Node.js ç‰ˆæœ¬ï¼šv16.x
- ä»£ç†è½¯ä»¶ï¼šClash / V2Ray / å…¶ä»–
- ä»£ç†ç«¯å£ï¼š7890

### æµ‹è¯•ç»“æœ
- é…ç½®ç•Œé¢ï¼šâœ… é€šè¿‡
- é…ç½®ä¿å­˜ï¼šâœ… é€šè¿‡
- è¿æ¥æµ‹è¯•ï¼šâœ… é€šè¿‡
- é‡ç½®åŠŸèƒ½ï¼šâœ… é€šè¿‡
- Electron é›†æˆï¼šâœ… é€šè¿‡

### å‘ç°çš„é—®é¢˜
1. æ— 

### å»ºè®®
1. è€ƒè™‘æ·»åŠ æ›´å¤šæµ‹è¯• URL é€‰é¡¹
2. å¯†ç åŠ å¯†å­˜å‚¨

### æ€»ç»“
ä»£ç†é…ç½®åŠŸèƒ½å·¥ä½œæ­£å¸¸ï¼Œæ»¡è¶³è®¾è®¡è¦æ±‚ã€‚
```

---

## ğŸš€ è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆæœªæ¥è®¡åˆ’ï¼‰

### å•å…ƒæµ‹è¯•

```javascript
// tests/unit/proxy-config.test.js
import { describe, it, expect } from 'vitest'
import { ProxyConfig, DEFAULT_PROXY_CONFIG } from '@/config/proxy'

describe('ProxyConfig', () => {
  it('should have correct default config', () => {
    const config = new ProxyConfig()
    expect(config.getConfig()).toEqual(DEFAULT_PROXY_CONFIG)
  })
  
  it('should save and load config', () => {
    const config = new ProxyConfig()
    const newConfig = {
      enabled: true,
      protocol: 'socks5',
      host: '192.168.1.1',
      port: 1080,
    }
    config.saveConfig(newConfig)
    expect(config.getConfig().host).toBe('192.168.1.1')
  })
})
```

### E2E æµ‹è¯•

ä½¿ç”¨ Playwright æˆ– Electron Spectron è¿›è¡Œç«¯åˆ°ç«¯æµ‹è¯•ã€‚

---

**æµ‹è¯•å®Œæˆåï¼Œè¯·å¡«å†™æµ‹è¯•æŠ¥å‘Šå¹¶æäº¤ï¼** âœ…
